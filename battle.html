<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Battle Field - ‡∏à‡∏õ‡∏£.</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700;800&family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root{
            --bg1: #7c0000;
            --bg2: #1e0000;
            --gold: #ffd54a;
            --deep-red: #b30000;
            --accent: linear-gradient(90deg, #b30000, #ffcc00);
            --card-border: rgba(255,215,0,0.35);
            --input-bg: rgba(255,255,255,0.95);
            --input-color: #550000;
            --soft-shadow: 0 8px 30px rgba(0,0,0,0.45);
        }

        * { box-sizing: border-box; }
        body{
            margin:0;
            font-family: "Prompt", "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            min-height:100vh;
            display:flex;
            flex-direction:column;
            align-items:center;
            justify-content:center;
            background: radial-gradient(circle at 20% 10%, var(--bg1), var(--bg2));
            color: #fff;
            line-height: 1.6;
        }

        header{
            width:100%;
            max-width:1100px;
            padding: 24px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap: 12px;
            color: var(--gold);
            text-shadow: 0 0 8px rgba(255,215,0,0.45);
        }
        header h1 { font-size: 26px; font-weight: 800; }
        header div { font-size: 14px; }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .header-btn {
            padding: 8px 16px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            background: rgba(255,215,0,0.1);
            color: var(--gold);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s, border-color 0.2s;
        }
        .header-btn:hover {
            background: rgba(255,215,0,0.2);
            border-color: var(--gold);
            transform: translateY(-1px);
        }


        main.container{
            width:100%;
            max-width:1100px;
            padding: 24px;
            display:grid;
            grid-template-columns: 1fr 1fr;
            gap: 22px;
        }

        .panel {
            background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.12));
            border-radius: 16px;
            padding: 22px;
            border: 1px solid var(--card-border);
            box-shadow: var(--soft-shadow);
            transition: transform .25s ease, box-shadow .25s ease;
            min-height: 320px;
        }
        .panel:hover { transform: translateY(-6px); box-shadow: 0 14px 40px rgba(0,0,0,0.6); }

        .badge {
            padding:6px 12px;
            border-radius: 999px;
            font-weight:700;
            font-size:14px;
            letter-spacing: .6px;
        }
        .badge.off { background: linear-gradient(90deg,#ffb347,#ffcc00); color:#6b1f00; }
        .badge.def { background: linear-gradient(90deg,#ffd1d1,#ff8c8c); color:#4a0000; }

        .panel h2 { margin:0; font-size:20px; font-weight: 700; color:var(--gold); text-shadow:0 0 8px rgba(255,215,0,0.22); }
        .desc { color: rgba(255,215,0,0.85); font-size:14px; margin:8px 0 16px; }

        .form { display:flex; flex-direction:column; gap:12px; margin-top:6px; }

        label { font-size:14px; color: #fff; font-weight:600; }

        input[type="text"]{
            padding: 12px 14px;
            border-radius: 10px;
            border: 1px solid rgba(255,215,0,0.12);
            background: var(--input-bg);
            color: var(--input-color);
            font-weight:600;
            font-size:15px;
            transition: transform .18s ease, box-shadow .18s ease;
            outline: none;
        }
        input[type="text"]::placeholder{ color: #8a2b2b; opacity:0.8; }
        input[type="text"]:focus{ transform: scale(1.02); box-shadow: 0 0 12px rgba(255,215,0,0.22); }
        
        .row { display: flex; gap: 10px; }
        .row .btn { flex-grow: 1; }

        .btn {
            padding: 12px 16px;
            border-radius: 10px;
            border:none;
            cursor:pointer;
            font-weight:700;
            letter-spacing:.6px;
            font-size:15px;
            color:#fff;
            background: var(--accent);
            position:relative;
            overflow:hidden;
            transition: transform .16s ease, box-shadow .16s ease;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 18px rgba(255,215,0,0.2); }
        .btn:active { transform: scale(.97); }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .btn.ghost {
            background: transparent;
            border: 1px solid rgba(255,215,0,0.18);
            color: var(--gold);
        }

        .status { margin-top:10px; font-size:14px; color: #fff; min-height:22px; }
        .status .ok { color:#c8ffd7; }
        .status .pending { color:#ffe6a7; }

        .footer-actions {
            grid-column: 1 / -1;
            display:flex;
            justify-content:center;
            margin-top:18px;
        }

        .start-btn {
            padding: 16px 40px;
            border-radius: 14px;
            font-size:20px;
            font-weight:800;
            background: linear-gradient(90deg,#ffcc00,#b30000);
            color:#2b0000;
            border: 1px solid rgba(0,0,0,0.3);
            cursor:pointer;
            position:relative;
            overflow:hidden;
            transition: all .3s ease;
            box-shadow: 0 0 20px rgba(179,0,0,0.4);
            white-space: nowrap; 
        }
        .start-btn::after {
            content:"";
            position:absolute;
            top:0; left:-100%;
            width:100%; height:100%;
            background: linear-gradient(120deg,rgba(255,255,255,0.3),rgba(255,255,255,0));
            transform: skewX(-20deg);
            transition: 0.5s;
        }
        .start-btn:hover::after { left:100%; }
        .start-btn:hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 0 40px rgba(255,215,0,0.4);
        }
        .start-btn:active {
            transform: scale(0.97);
            box-shadow: 0 0 20px rgba(255,215,0,0.2);
        }
        .start-btn:disabled{
            opacity:0.5;
            cursor:not-allowed;
            box-shadow:none;
            transform:none;
        }

        @media (max-width:880px){
            main.container{ grid-template-columns: 1fr; padding:18px; }
            header{ padding:18px; flex-direction: column; align-items: flex-start; }
            .header-actions { margin-top: 10px; width: 100%; justify-content: space-between; }
            .start-btn { font-size: 18px; padding: 14px 30px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Battle Field</h1>
        <div class="header-actions">
            <button class="header-btn" id="viewMapBtn">üìç ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡πÄ‡∏£‡∏Å</button>
        </div>
    </header>

    <main class="container">
        <section class="panel" id="offPanel">
            <div class="badge off">Offensive</div>
            <h2>‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Å (Offensive)</h2>
            <div class="desc">‡∏Å‡∏£‡∏≠‡∏Å Camera ID ‡πÅ‡∏•‡∏∞ Token ‡∏Ç‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Å ‚Üí ‡∏Å‡∏î Connect</div>

            <div class="form">
                <label>Camera ID</label>
                <input id="offCam" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô CAM_OFF_01" value="d3c6cbed-928a-456b-bd9b-9632192d2745">
                <label>Token</label>
                <input id="offTok" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô T0K3N_OFF" value="b4190b07-3af4-4b49-a5bc-af7f824a17b3">
                <div class="row">
                    <button class="btn" id="offConnect"><span class="shine"></span>Connect</button>
                    <button class="btn ghost" id="offClear">Clear</button>
                </div>
                <div class="status" id="offStatus"><span class="pending">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span></div>
            </div>
        </section>

        <section class="panel" id="defPanel">
            <div class="badge def">Defensive</div>
            <h2>‡∏ù‡πà‡∏≤‡∏¢‡∏£‡∏±‡∏ö (Defensive)</h2>
            <div class="desc">‡∏Å‡∏£‡∏≠‡∏Å Camera ID ‡πÅ‡∏•‡∏∞ Token ‡∏Ç‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏£‡∏±‡∏ö ‚Üí ‡∏Å‡∏î Connect</div>

            <div class="form">
                <label>Camera ID</label>
                <input id="defCam" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô CAM_DEF_01" value="c29011b1-05d6-48a8-bffc-768dc667a509">
                <label>Token</label>
                <input id="defTok" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô T0K3N_DEF" value="69056589-bd25-40ec-ae35-4c88c03613a4">
                <div class="row">
                    <button class="btn" id="defConnect"><span class="shine"></span>Connect</button>
                    <button class="btn ghost" id="defClear">Clear</button>
                </div>
                <div class="status" id="defStatus"><span class="pending">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span></div>
            </div>
        </section>

        <div class="footer-actions">
            <button class="start-btn" id="startBattle" disabled>‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô</button>
        </div>
    </main>

    <script>
        // üö® ‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î: ‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô 'YOUR_API_ENDPOINT_HERE' ‡πÄ‡∏õ‡πá‡∏ô URL/IP ‡∏Ç‡∏≠‡∏á Server ‡∏à‡∏£‡∏¥‡∏á
        const API_ENDPOINT = 'YOUR_API_ENDPOINT_HERE'; 

        const $ = s => document.querySelector(s);
        const offCam = $('#offCam'), offTok = $('#offTok'), offConnect = $('#offConnect'), offClear = $('#offClear'), offStatus = $('#offStatus');
        const defCam = $('#defCam'), defTok = $('#defTok'), defConnect = $('#defConnect'), defClear = $('#defClear'), defStatus = $('#defStatus');
        const startBtn = $('#startBattle');
        const viewMapBtn = $('#viewMapBtn');

        /**
         * ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏° Start Battle
         */
        function updateStartState(){
            const okOff = !!localStorage.getItem('connected_off');
            const okDef = !!localStorage.getItem('connected_def');
            
            // ‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà
            startBtn.disabled = !(okOff && okDef);
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            if (okOff && okDef) {
                startBtn.innerText = '‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏ö (Start Battle)';
            } else {
                startBtn.innerText = '‚ùå ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏Å‡πà‡∏≠‡∏ô';
            }
        }

        /**
         * ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡∏à‡∏£‡∏¥‡∏á
         */
        async function connectAPI(side){
            if (API_ENDPOINT === 'YOUR_API_ENDPOINT_HERE') {
                alert('üö® ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà API Endpoint ‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠!');
                return;
            }

            const isOff = side === 'off';
            const cam = isOff ? offCam.value.trim() : defCam.value.trim();
            const tok = isOff ? offTok.value.trim() : defTok.value.trim();
            const statusEl = isOff ? offStatus : defStatus;
            const connectBtn = isOff ? offConnect : defConnect;
            const connectedKey = 'connected_' + side;
            
            if(!cam || !tok){
                statusEl.innerHTML = '<span style="color:#ffd1d1">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Camera ID ‡πÅ‡∏•‡∏∞ Token ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö</span>';
                return;
            }

            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ UI ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            connectBtn.disabled = true;
            connectBtn.innerText = '‚è≥ Connecting...';
            statusEl.innerHTML = '<span class="pending">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠...</span>';
            localStorage.removeItem(connectedKey);

            try {
                // *** ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏à‡∏£‡∏¥‡∏á ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Fetch API ***
                const response = await fetch(API_ENDPOINT + '/connect', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${tok}` // ‡∏™‡πà‡∏á Token ‡πÉ‡∏ô Header
                    },
                    body: JSON.stringify({ camera_id: cam })
                });
                
                if (response.ok) {
                    // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
                    statusEl.innerHTML = '<span class="ok">‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>';
                    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡∏á‡πÉ‡∏ô Local Storage
                    localStorage.setItem('camera_' + side, cam);
                    localStorage.setItem('token_' + side, tok);
                    localStorage.setItem(connectedKey, '1');
                } else {
                    // ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (API ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö Error)
                    const contentType = response.headers.get('content-type');
                    let message = 'Server Error';
                    if (contentType && contentType.includes('application/json')) {
                        const errorData = await response.json();
                        message = errorData.message || `Status: ${response.status}`;
                    } else {
                        message = `Status: ${response.status} (${response.statusText})`;
                    }
                    
                    statusEl.innerHTML = `<span style="color:#ffd1d1">‚ùå ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ${message}</span>`;
                    localStorage.removeItem(connectedKey);
                    alert(`‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ ${isOff ? '‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Å' : '‡∏ù‡πà‡∏≤‡∏¢‡∏£‡∏±‡∏ö'} ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ${message}`);
                }
            } catch (error) {
                // Network Error ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤ CORS
                console.error('Connection Error:', error);
                statusEl.innerHTML = '<span style="color:#ffd1d1">‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢/CORS</span>';
                localStorage.removeItem(connectedKey);
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ (‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Network ‡πÅ‡∏•‡∏∞ API Endpoint)');
            }
            
            connectBtn.disabled = false;
            connectBtn.innerHTML = '<span class="shine"></span>Connect';
            updateStartState();
        }

        // --- Event Listeners ---

        offConnect.addEventListener('click', ()=> connectAPI('off'));
        defConnect.addEventListener('click', ()=> connectAPI('def'));

        offClear.addEventListener('click', ()=>{
            offCam.value = offTok.value = '';
            ['camera_off','token_off','connected_off'].forEach(localStorage.removeItem.bind(localStorage));
            offStatus.innerHTML = '<span class="pending">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span>';
            updateStartState();
        });

        defClear.addEventListener('click', ()=>{
            defCam.value = defTok.value = '';
            ['camera_def','token_def','connected_def'].forEach(localStorage.removeItem.bind(localStorage));
            defStatus.innerHTML = '<span class="pending">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span>';
            updateStartState();
        });

        startBtn.addEventListener('click', ()=>{
            const okOff = !!localStorage.getItem('connected_off');
            const okDef = !!localStorage.getItem('connected_def');

            if (okOff && okDef) {
                startBtn.disabled = true;
                startBtn.innerText = 'üöÄ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö...';
                
                setTimeout(()=>{
                    startBtn.innerText = '‚úÖ Battle Started';
                    alert('‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô! ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢');
                    // üí° Redirect ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ map.html ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
                    // window.location.href = 'map.html'; 
                }, 900);
            } else {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Camera ID ‡πÅ‡∏•‡∏∞ Token ‡∏Ç‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏ö‡∏∏‡∏Å‡πÅ‡∏•‡∏∞‡∏ù‡πà‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏ö');
                startBtn.disabled = true; 
                updateStartState();
            }
        });

        // Event Listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° View Map
        viewMapBtn.addEventListener('click', () => {
             window.location.href = 'map.html';
        });

        // ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
        window.addEventListener('load', ()=>{
            // ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            offCam.value = localStorage.getItem('camera_off') || offCam.value;
            offTok.value = localStorage.getItem('token_off') || offTok.value;
            defCam.value = localStorage.getItem('camera_def') || defCam.value;
            defTok.value = localStorage.getItem('token_def') || defTok.value;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            if(localStorage.getItem('connected_off')) offStatus.innerHTML = '<span class="ok">‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>';
            if(localStorage.getItem('connected_def')) defStatus.innerHTML = '<span class="ok">‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</span>';
            
            updateStartState();
        });
    </script>
</body>
</html>